

CREATE DATABASE pevn;

INSERT INTO inventary(name, mac) VALUES('M1-RAP-01','a0:23:9f:98:7e:20'); 
INSERT INTO inventary(name, mac) VALUES('M1-RAP-01','a0:23:9f:98:7e:21'); 
INSERT INTO inventary(name, mac) VALUES('M1-RAP-01','a0:23:9f:98:7e:22'); 
INSERT INTO inventary(name, mac) VALUES('M1-RAP-01','a0:23:9f:98:7e:23');
INSERT INTO inventary(name, mac) VALUES('M1-RAP-01','a0:23:9f:98:7e:2c');
INSERT INTO inventary(name, mac) VALUES('M1-RAP-01','a0:23:9f:98:7e:2e');
INSERT INTO inventary(name, mac) VALUES('M1-RAP-01','a0:23:9f:98:7e:2f');

INSERT INTO inventary(name, mac) VALUES('M2-RAP-02','00:d7:8f:c4:b8:20'); 
INSERT INTO inventary(name, mac) VALUES('M2-RAP-02','00:d7:8f:c4:b8:21'); 
INSERT INTO inventary(name, mac) VALUES('M2-RAP-02','00:d7:8f:c4:b8:23'); 
INSERT INTO inventary(name, mac) VALUES('M2-RAP-02','00:d7:8f:c4:b8:2c'); 
INSERT INTO inventary(name, mac) VALUES('M2-RAP-02','00:d7:8f:c4:b8:2e'); 
INSERT INTO inventary(name, mac) VALUES('M2-RAP-02','00:d7:8f:c4:b8:2f'); 

INSERT INTO inventary(name, mac) VALUES('CM11-RAP-01','50:0f:80:a1:c4:e0');
INSERT INTO inventary(name, mac) VALUES('CM11-RAP-01','50:0f:80:a1:c4:e1');
INSERT INTO inventary(name, mac) VALUES('CM11-RAP-01','50:0f:80:a1:c4:e3');
INSERT INTO inventary(name, mac) VALUES('CM11-RAP-01','50:0f:80:a1:c4:ec');
INSERT INTO inventary(name, mac) VALUES('CM11-RAP-01','50:0f:80:a1:c4:ee');
INSERT INTO inventary(name, mac) VALUES('CM11-RAP-01','50:0f:80:a1:c4:ef');

INSERT INTO inventary(name, mac) VALUES('CM10-MAP-01','00:ee:ab:ff:fa:e0');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-01','00:ee:ab:ff:fa:e1');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-01','00:ee:ab:ff:fa:e3');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-01','00:ee:ab:ff:fa:ec');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-01','00:ee:ab:ff:fa:ee');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-01','00:ee:ab:ff:fa:ef');


INSERT INTO inventary(name, mac) VALUES('CM09-MAP-01','b4:de:31:ba:76:60');
INSERT INTO inventary(name, mac) VALUES('CM09-MAP-01','b4:de:31:ba:76:61');
INSERT INTO inventary(name, mac) VALUES('CM09-MAP-01','b4:de:31:ba:76:63');
INSERT INTO inventary(name, mac) VALUES('CM09-MAP-01','b4:de:31:ba:76:6c');
INSERT INTO inventary(name, mac) VALUES('CM09-MAP-01','b4:de:31:ba:76:6e');
INSERT INTO inventary(name, mac) VALUES('CM09-MAP-01','b4:de:31:ba:76:6f');

INSERT INTO inventary(name, mac) VALUES('CM06-MAP-02','b4:de:31:ba:70:e0');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-02','b4:de:31:ba:70:e1');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-02','b4:de:31:ba:70:e3');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-02','b4:de:31:ba:70:ec');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-02','b4:de:31:ba:70:ee');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-02','b4:de:31:ba:70:ef');

INSERT INTO inventary(name, mac) VALUES('CM05-MAP-02','cc:16:7e:57:06:f0');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-02','cc:16:7e:57:06:f1');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-02','cc:16:7e:57:06:f3');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-02','cc:16:7e:57:06:fc');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-02','cc:16:7e:57:06:fe');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-02','cc:16:7e:57:06:ff');

INSERT INTO inventary(name, mac) VALUES('CM06-MAP-01','50:0f:80:a1:b3:f0');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-01','50:0f:80:a1:b3:f1');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-01','50:0f:80:a1:b3:f3');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-01','50:0f:80:a1:b3:fc');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-01','50:0f:80:a1:b3:fe');
INSERT INTO inventary(name, mac) VALUES('CM06-MAP-01','50:0f:80:a1:b3:ff');

INSERT INTO inventary(name, mac) VALUES('CM05-MAP-01','08:96:ad:d6:59:a0');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-01','08:96:ad:d6:59:a1');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-01','08:96:ad:d6:59:a3');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-01','08:96:ad:d6:59:ac');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-01','08:96:ad:d6:59:ae');
INSERT INTO inventary(name, mac) VALUES('CM05-MAP-01','08:96:ad:d6:59:af');

INSERT INTO inventary(name, mac) VALUES('CM07-MAP-01','a0:23:9f:98:85:10');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-01','a0:23:9f:98:85:11');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-01','a0:23:9f:98:85:13');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-01','a0:23:9f:98:85:1c');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-01','a0:23:9f:98:85:1e');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-01','a0:23:9f:98:85:1f');

INSERT INTO inventary(name, mac) VALUES('TS-RAP-01','a0:23:9f:98:82:10');
INSERT INTO inventary(name, mac) VALUES('TS-RAP-01','a0:23:9f:98:82:11');
INSERT INTO inventary(name, mac) VALUES('TS-RAP-01','a0:23:9f:98:82:13');
INSERT INTO inventary(name, mac) VALUES('TS-RAP-01','a0:23:9f:98:82:1c');
INSERT INTO inventary(name, mac) VALUES('TS-RAP-01','a0:23:9f:98:82:1e');
INSERT INTO inventary(name, mac) VALUES('TS-RAP-01','a0:23:9f:98:82:1f');

INSERT INTO inventary(name, mac) VALUES('CM03-MAP-01','00:27:e3:b8:32:90');
INSERT INTO inventary(name, mac) VALUES('CM03-MAP-01','00:27:e3:b8:32:91');
INSERT INTO inventary(name, mac) VALUES('CM03-MAP-01','00:27:e3:b8:32:93');
INSERT INTO inventary(name, mac) VALUES('CM03-MAP-01','00:27:e3:b8:32:9c');
INSERT INTO inventary(name, mac) VALUES('CM03-MAP-01','00:27:e3:b8:32:9e');
INSERT INTO inventary(name, mac) VALUES('CM03-MAP-01','00:27:e3:b8:32:9f');

INSERT INTO inventary(name, mac) VALUES('CM10-MAP-02','d4:e8:80:c4:b6:30');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-02','d4:e8:80:c4:b6:31');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-02','d4:e8:80:c4:b6:33');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-02','d4:e8:80:c4:b6:3c');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-02','d4:e8:80:c4:b6:3e');
INSERT INTO inventary(name, mac) VALUES('CM10-MAP-02','d4:e8:80:c4:b6:3f');

INSERT INTO inventary(name, mac) VALUES('CM07-MAP-02','b4:de:31:ba:74:b0');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-02','b4:de:31:ba:74:b1');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-02','b4:de:31:ba:74:b3');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-02','b4:de:31:ba:74:bc');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-02','b4:de:31:ba:74:be');
INSERT INTO inventary(name, mac) VALUES('CM07-MAP-02','b4:de:31:ba:74:bf');

INSERT INTO inventary(name, mac) VALUES('BAR-CIV-MAP','18:80:90:98:24:a0');
INSERT INTO inventary(name, mac) VALUES('BAR-CIV-MAP','18:80:90:98:24:a1');
INSERT INTO inventary(name, mac) VALUES('BAR-CIV-MAP','18:80:90:98:24:a3');
INSERT INTO inventary(name, mac) VALUES('BAR-CIV-MAP','18:80:90:98:24:ac');
INSERT INTO inventary(name, mac) VALUES('BAR-CIV-MAP','18:80:90:98:24:ae');
INSERT INTO inventary(name, mac) VALUES('BAR-CIV-MAP','18:80:90:98:24:af');

INSERT INTO inventary(name, mac) VALUES('CM02-MAP-01','a0:e0:af:b4:31:10');
INSERT INTO inventary(name, mac) VALUES('CM02-MAP-01','a0:e0:af:b4:31:11');
INSERT INTO inventary(name, mac) VALUES('CM02-MAP-01','a0:e0:af:b4:31:13');
INSERT INTO inventary(name, mac) VALUES('CM02-MAP-01','a0:e0:af:b4:31:1c');
INSERT INTO inventary(name, mac) VALUES('CM02-MAP-01','a0:e0:af:b4:31:1e');
INSERT INTO inventary(name, mac) VALUES('CM02-MAP-01','a0:e0:af:b4:31:1f');

INSERT INTO inventary(name, mac) VALUES('CM04-MAP-01','d4:e8:80:c4:b7:20');
INSERT INTO inventary(name, mac) VALUES('CM04-MAP-01','d4:e8:80:c4:b7:21');
INSERT INTO inventary(name, mac) VALUES('CM04-MAP-01','d4:e8:80:c4:b7:23');
INSERT INTO inventary(name, mac) VALUES('CM04-MAP-01','d4:e8:80:c4:b7:2c');
INSERT INTO inventary(name, mac) VALUES('CM04-MAP-01','d4:e8:80:c4:b7:2e');
INSERT INTO inventary(name, mac) VALUES('CM04-MAP-01','d4:e8:80:c4:b7:2f');

INSERT INTO inventary(name, mac) VALUES('CM01-MAP-01','00:27:e3:b8:24:20');
INSERT INTO inventary(name, mac) VALUES('CM01-MAP-01','00:27:e3:b8:24:21');
INSERT INTO inventary(name, mac) VALUES('CM01-MAP-01','00:27:e3:b8:24:23');
INSERT INTO inventary(name, mac) VALUES('CM01-MAP-01','00:27:e3:b8:24:2c');
INSERT INTO inventary(name, mac) VALUES('CM01-MAP-01','00:27:e3:b8:24:2e');
INSERT INTO inventary(name, mac) VALUES('CM01-MAP-01','00:27:e3:b8:24:2f');

INSERT INTO inventary(name, mac) VALUES('CM08-MAP-01','b4:de:31:04:22:f0');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-01','b4:de:31:04:22:f1');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-01','b4:de:31:04:22:f3');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-01','b4:de:31:04:22:fc');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-01','b4:de:31:04:22:fe');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-01','b4:de:31:04:22:fd');

INSERT INTO inventary(name, mac) VALUES('CM08-MAP-02','d4:e8:80:c4:b8:50');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-02','d4:e8:80:c4:b8:51');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-02','d4:e8:80:c4:b8:53');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-02','d4:e8:80:c4:b8:5c');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-02','d4:e8:80:c4:b8:5e');
INSERT INTO inventary(name, mac) VALUES('CM08-MAP-02','d4:e8:80:c4:b8:5f');









INSERT INTO inventary(name, mac, ssid, description) VALUES('CM04-MAP-02', 'a0:23:9f:98:8c:6f', 'ANTUMESH', '5.8'); 
INSERT INTO inventary(name, mac, ssid, description) VALUES('CM04-MAP-02', 'a0:23:9f:98:8c:61', 'TECMINA', '2.4'); 
INSERT INTO inventary(name, mac, ssid, description) VALUES('CM04-MAP-02', 'a0:23:9f:98:8c:6e', 'TECMINA', '5.8'); 

a0:23:9f:98:7e:20

CREATE TABLE inventary (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    mac TEXT NULL,
    ssid TEXT
    description TEXT NULL,
);

CREATE TABLE scan (
    id SERIAL PRIMARY KEY,
    ssid TEXT NOT,
    mac TEXT,
    rssi TEXT
    channel INTEGER,
    date TIMESTAMP,
);


CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username TEXT NOT NULL,
    name TEXT NOT NULL,
    email TEXT NOT NULL UNIQUE,
    password TEXT NOT NULL,
    role TEXT NOT NULL,
    position TEXT,
    avatar TEXT,
    initials TEXT,
    shift TEXT,
    birthday DATE
);

CREATE TABLE areas(
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    color TEXT NOT NULL
);

CREATE TABLE sectors(
    id SERIAL PRIMARY KEY,
    area_id INTEGER NOT NULL REFERENCES areas(id),
    name TEXT NOT NULL
);

CREATE TABLE services(
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL
);

CREATE TABLE components(
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL
);

CREATE TABLE equipments(
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL
);

CREATE TABLE planning(
    id SERIAL PRIMARY KEY,
    week TEXT NOT NULL,
    team TEXT NOT NULL,
    worker INTEGER,
    star_date TEXT,
    end_date TEXT,
    created_by_id INTEGER REFERENCES users(id),
    create_date DATE,
    supervisor_id INTEGER REFERENCES users(id),
    technical1_id INTEGER REFERENCES users(id),
    technical2_id INTEGER REFERENCES users(id),
    shift TEXT,
);



CREATE TABLE uservsplanning (
    user_id INTEGER NOT NULL REFERENCES users(id),
    planning_id INTEGER NOT NULL REFERENCES planning(id)
);


CREATE TABLE pm(
id serial primary key,
area INTEGER NOT NULL REFERENCES areas(id),
sector INTEGER NOT NULL REFERENCES sectors(id),
service INTEGER NOT NULL REFERENCES services(id),
component INTEGER NOT NULL REFERENCES components(id),
equipment INTEGER NOT NULL REFERENCES equipment(id),
name TEXT,
workers INTEGER,
duration REAL,
hh REAL,
frecuency_days REAL,
date DATE,
active boolean,
);

CREATE TABLE master_plan(
    id SERIAL PRIMARY KEY,
    pm_id INTEGER REFERENCES pm(id),
    date DATE,
    hh REAL
);


CREATE TABLE ot (
    id SERIAL PRIMARY KEY,
    order TEXT NOT NULL,
    created_by_id INTEGER NOT NULL REFERENCES users(id),
    create_date DATE,
    type TEXT,
    scheduled_date DATE,
    duration TEXT,
    area INTEGER NOT NULL REFERENCES areas(id),
    sector INTEGER NOT NULL REFERENCES sectors(id),
    service INTEGER NOT NULL REFERENCES services(id),
    component INTEGER NOT NULL REFERENCES equipment(id),
    equipment INTEGER NOT NULL REFERENCES services(id),
    pm INTEGER REFERENCES pm(id),
    description TEXT,
    technical_location TEXT,
    technical_resources TEXT,
    equipment_status TEXT,
    workers INTEGER,
    hh TEXT,
    ot_release_date DATE,
    ot_status TEXT,
    execution_date DATE,
    start_time TEXT NOT NULL,
    end_time TEXT NOT NULL,
    real_workers INTEGER,
    hh_effective REAL,
    reason_not_executed TEXT,
    authorization_for_ot_cancellation TEXT,
    notice_for_deviation TEXT,
);

N OT	Área	Sector	Servicio	Componente	Equipo	Pauta de Mantención	Ubicación Técnica	Recursos Técnicos	Estado Equipo	Pers	Dur	HH	Fecha Programada	Clase de Orden	Ejecutor	Descripción Actividad	Fecha Liberación de OT	Estado OT	Fecha Ejecución	Hora Inicio	Hora Termino	N Pers	HH Efectivas	Motivo No ejecutada	Autorización Por Cancelacion de OT	Aviso Por Desviación


CREATE TABLE delivery(
    id SERIAL PRIMARY KEY,
    ot_id INTEGER REFERENCES ot(id),
    supervisor_id INTEGER REFERENCES users(id),
    close_by INTEGER NOT NULL REFERENCES users(id)
    comment TEXT,
    date DATE,
    status_ot TEXT,
    start_time TEXT,
    end_time TEXT,
    workers INTEGER,
    reason_not_executed TEXT,
    notice_for_deviation TEXT
);

CREATE VIEW ot_basic
AS 
    select id_a ,a_area, a_equipment, a_service, a_scheduled_date from ot;





CREATE TABLE pm03(
    id SERIAL PRIMARY KEY,
    create_by_id INTEGER NOT NULL REFERENCES users(id),
    assigned_id INTEGER[],
    teamwork TEXT,
    ot TEXT,
    area INTEGER NOT NULL REFERENCES areas(id),
    sector INTEGER NOT NULL REFERENCES sectors(id),
    service INTEGER NOT NULL REFERENCES services(id),
    component INTEGER NOT NULL REFERENCES components(id),
    equipment INTEGER NOT NULL REFERENCES equipments(id),
    description TEXT,
    equipment_status TEXT,
    no_service BOOLEAN,
    notice_date DATE,
    priority INTEGER
);





CREATE TABLE pm03Delivery(
    close_by INTEGER NOT NULL REFERENCES users(id)
    start_date DATE,
    end_date DATE,
    start_time TEXT,
    end_time TEXT,
    duration TEXT,
    workers TEXT,
    hh TEXT,
    technical_resources TEXT,
    ot_status TEXT,
    failure TEXT,
    solution TEXT
);


close_by,	start_date,	end_date,	start_time,	end_time,	duration,	workers,	hh,	technical_resources,	ot_status,	failure	solution



select sectors.id, sectors.name as sector, areas.name as area from sectors inner join areas on areas.id = sectors.id_area;

select sectors.id, sectors.name as sector, areas.name as area from sectors inner join areas on areas.id = sectors.id_area where areas.name='MINA';


CREATE TABLE inquilinos(
    nombre varchar(),
    
)





